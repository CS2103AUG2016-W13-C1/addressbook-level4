# A0121643R
###### \java\seedu\todo\logic\commands\UpdateCommand.java
``` java
    private Priority makeNewPriority(ReadOnlyTask taskToUpdate) throws IllegalValueException {
        Priority newPriority;
        if (this.priority == null) {
            newPriority = taskToUpdate.getPriority();
        } else {
            newPriority = this.priority.trim().equals("-") 
                    ? new Priority(Priority.DEFAULT_PRIORITY) 
                    : new Priority(this.priority);
        }
        return newPriority;
    }    
```
###### \java\seedu\todo\logic\parser\ParserFormats.java
``` java
    public static final Pattern ADD_PRIORITY_FT = Pattern
            .compile(NAME_FORMAT + ON_DATE_FORMAT + BY_DATE_FORMAT 
                    + PRIORITY_FORMAT + DETAIL_FORMAT, Pattern.CASE_INSENSITIVE);

    public static final Pattern ADD_PRIORITY_ON = Pattern
            .compile(NAME_FORMAT + ON_DATE_FORMAT + PRIORITY_FORMAT 
                    + DETAIL_FORMAT, Pattern.CASE_INSENSITIVE);

    public static final Pattern ADD_PRIORITY_BY = Pattern
            .compile(NAME_FORMAT + BY_DATE_FORMAT + PRIORITY_FORMAT 
                    + DETAIL_FORMAT, Pattern.CASE_INSENSITIVE);
    
    public static final Pattern ADD_PRIORITY_FL = Pattern
            .compile("(?<name>[a-zA-Z_0-9 ]+)" + PRIORITY_FORMAT 
                    + "(?: ?; ?(?<detail>.+))?", Pattern.CASE_INSENSITIVE);
    
```
###### \java\seedu\todo\logic\parser\ParserFormats.java
``` java
    public static final Pattern SEARCH_PRIORITY = Pattern
            .compile("priority (?<priority>.+)(?<comOpt> done|all|undone)?", Pattern.CASE_INSENSITIVE);
    
```
###### \java\seedu\todo\model\Model.java
``` java
    /** updates the filter of the filtered task list to filter by the given priority level*/
    void updateFilteredTaskListByPriority(Priority priority, SearchCompletedOption option);
}
```
###### \java\seedu\todo\model\ModelManager.java
``` java
    @Override
    public void updateFilteredTaskListByPriority(Priority priority, SearchCompletedOption option) {
        updateFilteredTaskList(new PredicateExpression(new PriorityQualifier(priority, option)));   
    }

```
###### \java\seedu\todo\model\qualifiers\PriorityQualifier.java
``` java

public class PriorityQualifier implements Qualifier {
    
    private Priority priority;
    private SearchCompletedOption option;

    public PriorityQualifier(Priority priority, SearchCompletedOption option) {
        this.priority = priority;
        this.option = option;
    }
    

    @Override
    public boolean run(ReadOnlyTask task) {

        boolean taskOfPriority = task.getPriority().equals(priority);
        
        if (option == SearchCompletedOption.ALL) {
            return taskOfPriority;
        } else if (option == SearchCompletedOption.DONE) {
            return taskOfPriority && task.getCompletion().isCompleted();
        } else {
            return taskOfPriority && !task.getCompletion().isCompleted();
        }
    }

    @Override
    public String toString() {
        return "priority= " + priority.toString();
    }

}
```
###### \java\seedu\todo\model\task\Priority.java
``` java
public class Priority {

    public static final String PRIORITY_RULE = "Task priority should be high, mid or low";
    public static final String PRIORITY_REGEX = "(high|mid|low)";
    public static final String DEFAULT_PRIORITY = "low";
    public static final String LOW = "low";
    public static final String MID = "mid";
    public static final String HIGH = "high";

    public final String priorityLevel;

    /**
     * Validates given priority.
     *
     * @throws IllegalValueException if given priority string is invalid.
     */
    public Priority(String priority) throws IllegalValueException {
        assert priority != null;
        String tempPriority = priority.trim();
        if (!isValidpriority(tempPriority)) {
            throw new IllegalValueException(PRIORITY_RULE);
        }
        this.priorityLevel = tempPriority;
    }

    /**
     * Returns true if a given string is a valid task priority.
     */
    public static boolean isValidpriority(String test) {
        return test.matches(PRIORITY_REGEX);
    }


    @Override
    public String toString() {
        return priorityLevel;
    }

    @Override
    public boolean equals(Object other) {
        return other == this // short circuit if same object
                || (other instanceof Priority // instanceof handles nulls
                && this.priorityLevel.equals(((Priority) other).priorityLevel)); // state check
    }

    @Override
    public int hashCode() {
        return priorityLevel.hashCode();
    }

}
```
###### \java\seedu\todo\model\task\Task.java
``` java
    @Override
    public Priority getPriority() {
        return this.priority;
    }
```
###### \java\seedu\todo\model\task\Task.java
``` java
    public void setPriority(Priority p) {
        this.priority = p;
    }
```
###### \java\seedu\todo\ui\TaskCard.java
``` java
    @FXML
    public void initialize() {
        name.setText(task.getName().fullName);
        if (task.getCompletion().isCompleted()) {
        	name.setFill(Color.LIGHTGREY);
        	name.setStyle("-fx-strikethrough: true");
        	name.setOpacity(50);
        }
        
        id.setText(displayedIndex + ". ");
        
        details.setText(task.getDetail().value);
        
        if (task.getOnDate().getDate() != null) {
            onDate.setText("Start: " + PrettifyDate.prettifyDate(task.getOnDate().getDate()) 
                            + " @ " + task.getOnDate().getTime());
        } else {
            onDate.setText("");
        }
        
        if (task.getByDate().getDate() != null) {
            byDate.setText("End: " + PrettifyDate.prettifyDate(task.getByDate().getDate()) 
                            + " @ " + task.getByDate().getTime());
        } else {
            byDate.setText("");
        }
        
        if (task.isRecurring()) {
            recurrence.setText("Every: " + task.getRecurrence().toString());
        } else {
            recurrence.setText("");
        }
        
    	if (task.getCompletion().isCompleted()) {
    		priorityLevel.setFill(Color.WHITE);
    		priorityLevel.setStroke(Color.WHITE);
    	} else if (task.getPriority().toString().equals(Priority.LOW)) {
        	priorityLevel.setFill(Color.LIMEGREEN);
        } else if (task.getPriority().toString().equals(Priority.MID)) {
        	priorityLevel.setFill(Color.YELLOW);
        } else {
        	priorityLevel.setFill(Color.RED);
        }
        
        tags.setText(task.tagsString());
    }

    public HBox getLayout() {
        return cardPane;
    }

    @Override
    public void setNode(Node node) {
        cardPane = (HBox) node;
    }

    @Override
    public String getFxmlPath() {
        return FXML;
    }
}
```
###### \resources\view\TaskListCard.fxml
``` fxml
                  <Circle fx:id="priorityLevel" fill="#1fff4d" radius="6.0" scaleX="1.1" scaleY="1.1" scaleZ="1.1" stroke="BLACK" strokeType="INSIDE" translateX="35.0" />
               </children>
            </GridPane>
            <VBox alignment="CENTER_LEFT" maxHeight="150.0" minHeight="105.0" prefHeight="115.0" translateY="-5.0" GridPane.columnIndex="1">
               <padding>
                  <Insets bottom="2.0" left="-20.0" right="2.0" top="2.0" />
               </padding>
               <children>
                        <Label fx:id="onDate" contentDisplay="RIGHT" minWidth="150.0" prefHeight="17.0" prefWidth="168.0" styleClass="cell_small_label" text="\$onDate" translateX="-30.0" translateY="-20.0" />
                        <Label fx:id="byDate" minWidth="150.0" prefHeight="17.0" prefWidth="150.0" styleClass="cell_small_label" text="\$byDate" translateX="-30.0" translateY="-18.0" />
                  <Label fx:id="recurrence" prefHeight="17.0" prefWidth="174.0" styleClass="cell_small_label" text="\$recur" translateX="-30.0" translateY="-15.0" />
               </children>
            </VBox>
            </children>
         <rowConstraints>
            <RowConstraints />
         </rowConstraints>
        </GridPane>
    </children>
</HBox>
```
